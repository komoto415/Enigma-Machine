<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="EnigmaMachine.js"></script>
    <style>
        html,
        body {
            margin-top: 10px;
            margin-left: 20px;
        }
        
        #cipher,
        #plain {
            border: 1px solid black;
            min-height: 100px;
            width: 80vw;
            max-width: 80vw;
        }
    </style>
</head>

<body>
    <label for="plain">Type what you want to encode</label><br>
    <textarea id="plain" name=""></textarea><br>
    <label for="cipher">Your Encrypted text goes below</label>
    <div id="cipher"></div><br>
    <button id="reset" onclick="reset()">Reset</button>
    <script>
        plainDom = document.getElementById("plain");
        cipherDom = document.getElementById("cipher");
        plainDom.addEventListener("input", e => {
            console.log(e);
            if (e.inputType.includes("insert")) {
                if (e.inputType === "insertLineBreak") {
                    cipher = "<br>";
                } else {
                    var key = (e.data);
                    console.log(`Pressed: ${key}`);
                    cipher = myMachine1.keyPress(key);
                    console.log(`Output: ${cipher}`);
                }
                console.log(cipher)
                cipherDom.innerHTML += cipher;
                if (cipher === key) {
                    alert("ERROR: Matched")
                }
            }
        });

        reset = () => {
            myMachine1.r1.position = 0;
            myMachine1.r2.position = 0;
            myMachine1.r3.position = 0;
            plainDom.value = "";
            cipherDom.innerHTML = "";
            go = false
        }
    </script>
</body>

</html>